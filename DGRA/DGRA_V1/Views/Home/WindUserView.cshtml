@*@using DGRA_V1.Models.Permission;*@

@{
    ViewData["Title"] = "Wind Site User Master";
}
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,400i,700&display=fallback">
<!-- Font Awesome -->
<link rel="stylesheet" href="~/Content/theme/plugins/fontawesome-free/css/all.min.css">
<!-- daterange picker -->
<link rel="stylesheet" href="~/Content/theme/plugins/daterangepicker/daterangepicker.css">
<!-- DataTables -->
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
<link rel="stylesheet" href="~/Content/theme/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">

<link href="~/Content/theme/dist/css/adminlte.css" rel="stylesheet" />
<style>
    .tab-btn {
        font-size: 0.7rem;
        font-weight: bold;
    }
</style>

<div class="content-wrapper">

    <section class="content-header">
    </section>


    <section class="content">
        <div class="card">
            <div class="card-header">
                <h3 class="card-title  text-center">Wind Site User Master</h3>

            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-sm-4 col-form-label text-right">Full Name : </label>
                                <input type="text" class="form-control  col-sm-8" id="fullname" name="fullname" disabled />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-sm-4 col-form-label text-right">User Email : </label>
                                <input type="text" class="form-control  col-sm-8" id="useremail" name="useremail" disabled />
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <div class="row">
                                <label class="col-sm-4 col-form-label text-right">Role : </label>
                                <select class="form-control  col-sm-8" id="userrole" name="userrole" value="" disabled />
                                <option value="">Select user role</option>
                                <option value="User">User</option>
                                <option value="Admin">Admin</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-sm-9"></div>
                    <div class="col-sm-2">
                        <INPUT type="button" class="btn btn-block btn-success" value="Add Site" onclick="addRow('dataTable')" />
                    </div>
                    <div class="col-sm-1"></div>
                </div>

                <div class="row">
                    <div class="col-sm-1"></div>
                    <div class="col-sm-10">
                        <table class="table table-bordered table-striped" id="dataTable">
                            <tr>
                                <th>Site Name</th>
                                <th>Upload Access</th>
                                <th>Action</th>
                            </tr>
                            <tr>
                                <td>
                                    <select class="form-control  col-sm-8  site" id="site1" name="site" value="">
                                        <option value="">Select Site</option>
                                    </select>
                                </td>
                                <td> <input type="checkbox" class="form-check-input" id="upload_access1" name="upload_access" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                                <td><input type="button" class="btn btn-block btn-danger" name="button1" value="Delete" onclick="removeRow('button1')" style="width: 50%;"></td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-sm-1"></div>
                </div>
            </div>
            <hr>
            <div class="row">
                <div class="col-sm-1"></div>
                <div class="col-sm-5">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <th><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></th>
                            <th>Pages</th>
                        </tr>
                        @*@foreach (var list in DGRA_V1.Models.Permission1.PermissionList)
        {
            <tr>
                <td><input type = "checkbox" class="form-check-input" id="read" name="read" value="@list.name" style="margin-left: 15px; margin-top: 7px;"></td>
                <td>@list.name</td>
            </tr>
        }*@
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Generation View Summery</td>
                        </tr>
                    <tr>
                        <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                        <td>Daily Target KPI</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                        <td>Daily Loadshedding</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                        <td>Mothly Target KPI</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                        <td>Monthly Lineloss</td>
                    </tr>
                    <tr>
                        <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                    <td>Monthly JMR</td>
                    </tr>
                    </table>
                </div>
                <div class="col-sm-5">
                    <table class="table table-bordered table-striped">
                        <tr>
                            <th><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></th>
                            <th>Reports</th>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Site Maste Report</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Loacation Maste Report</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Generation Report</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Breakdown Report</td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;"></td>
                            <td>Performance Report</td>
                        </tr>
                    </table>
                </div>
                <div class="col-sm-1"></div>
            </div>
        </div>
        <!--<div class="row">
            <div class="col-sm-6">
                <div class="form-group">
                    <div class="row">
                        <label class="col-sm-4 col-form-label text-right">Site Name : </label>
                        <select class="form-control  col-sm-8" id="site" name="site" value="">
                            <option value="">Select Site</option>
                        </select>
                    </div>
                </div>
            </div>
            <
        <div class="row">
            <div class="col-sm-2"></div>
            <div class="col-sm-2">

                <label class=" form-check-label text-left">Read : </label>
                <input type="checkbox" class="form-check-input" id="read" name="read" value="1" style="margin-left: 15px; margin-top: 7px;">

            </div>
            <div class="col-sm-2">
                <label class="form-check-label text-left">Write : </label>
                <input type="checkbox" class="form-check-input" id="write" name="write" value="1" style="margin-left: 15px; margin-top: 7px;">

            </div>-->
        <div class="col-sm-6"></div>
</div>
<div class="row"><p><br></p></div>
<!--<div class="row">
    <div class="col-sm-4"></div>

    <div class="col-sm-2"><button type="button" class="btn btn-block btn-success" onclick="SubmitDetials()">Create</button></div>
    <div class="col-sm-2"> <button type="button" class="btn btn-block btn-danger" onclick="DataApproved(2)">Cancel</button></div>
    <div class="col-sm-4"></div>
</div>-->
<div class="row"><p><br></p></div>
        </div>

</section>

</div>
<script src="~/Content/theme/plugins/jquery/jquery.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
<script src="~/Content/theme/plugins/moment/moment.min.js"></script>
<script src="~/Content/theme/plugins/daterangepicker/daterangepicker.js" defer></script>
<script src="~/Content/theme/plugins/tempusdominus-bootstrap-4/js/tempusdominus-bootstrap-4.min.js"></script>

<script src="~/Content/theme/plugins/summernote/summernote-bs4.min.js"></script>
<!--Datatable -->
<script src="~/Content/theme/plugins/datatables/jquery.dataTables.min.js"></script>
<script src="~/Content/theme/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="~/Content/theme/plugins/datatables-responsive/js/dataTables.responsive.min.js"></script>
<script src="~/Content/theme/plugins/datatables-responsive/js/responsive.bootstrap4.min.js"></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/dataTables.buttons.min.js"></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.bootstrap4.min.js"></script>
<script src="~/Content/theme/plugins/jszip/jszip.min.js"></script>
<script src="~/Content/theme/plugins/pdfmake/pdfmake.min.js"></script>
<script src="~/Content/theme/plugins/pdfmake/vfs_fonts.js"></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.html5.min.js"></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.print.min.js"></script>
<script src="~/Content/theme/plugins/datatables-buttons/js/buttons.colVis.min.js"></script>
<script src="~/Content/theme/plugins/bootstrap/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">

    window.onload = function () {
        id = 0;
        function GetURLParameter(sParam) {
            var sPageURL = window.location.search.substring(1);
            var sURLVariables = sPageURL.split('&');
            for (var i = 0; i < sURLVariables.length; i++) {
                var sParameterName = sURLVariables[i].split('=');
                if (sParameterName[0] == sParam) {
                    return decodeURIComponent(sParameterName[1]);
                }
            }
        }
        id = GetURLParameter('id');
        GetDetails(id);
        getSite();
    }
    function GetDetails(loginid) {
        $.ajax({
            type: "GET",
            url: "/Home/GetWindUserInfo?login_id=" + loginid,
            contentType: "application/json; charset=utf-8",
            datatype: "html",
            success: function (result, status, xhr) {
                console.log(result);
                document.getElementById("fullname").value = result[0].username;
                document.getElementById("useremail").value = result[0].useremail;
                document.getElementById("userrole").value = result[0].user_role;

            }
        });
    }
    function getSite() {
        var state = "";
        var spv = "";

        $.ajax({
            type: "POST",
            url: "/WindReport/GetSiteList?state=" + state + "&spv=" + spv,
            contentType: "application/json; charset=utf-8",
            // data: '{"state":"' + val + '"}',
            datatype: "html",
            success: function (result, status, xhr) {
                var options = "";
                options += '<option value="">Select Site</option>';
                for (var k = 0; k < result.length; k++) {
                    options += '<option value="' + result[k].site_master_id + '">' + result[k].site + '</option>';
                }
                $(".site").html(options);

            }
        });
    }
    function addRow(tableID) {
        var table = document.getElementById(tableID);
        var site_options = $('.site').first().html();
        console.log(site_options);
        var row = '<tr><td><select class="form-control  col-sm-8 site" id="site" name="site" value="">' + site_options + '</select></td>';
        row += '<td><input type="checkbox" class="form-check-input" id="upload_access1" name="upload_access" value="1" style="margin-left: 15px; margin-top: 7px;"></td>';
        row += '<td><input type="button" class="btn btn-block btn-danger" name="button1" value="Delete" onclick="removeRow()" style="width: 50%;"></td></tr >';
        $(table).find('tbody').append(row);
        // var rowCount = table.rows.length;
        //var row = table.insertRow(row);
        //Column 1
        /* debugger;
         var cell1 = row.insertCell(0);
         var element1 = document.createElement("input");
         element1.type = "button";
         var btnName = "button" + (rowCount + 1);
         element1.name = btnName;
         element1.setAttribute('value', 'Delete'); // or element1.value = "button";
         element1.onclick = function () {
             removeRow(btnName);
         }
         cell1.appendChild(element1);
         //Column 2
         var cell2 = row.insertCell(1);
         cell2.innerHTML = rowCount + 1;
         //Column 3
         var cell3 = row.insertCell(2);
         var element3 = document.createElement("input");
         element3.type = "text";
         cell3.appendChild(element3);*/
    }

    function removeRow(btnName) {
        try {
            var table = document.getElementById('dataTable');
            var rowCount = table.rows.length;
            for (var i = 0; i < rowCount; i++) {
                var row = table.rows[i];
                var rowObj = row.cells[0].childNodes[0];
                if (rowObj.name == btnName) {
                    table.deleteRow(i);
                    rowCount--;
                }
            }
        } catch (e) {
            alert(e);
        }
    }


</script>
